---
title: 'O Virtual DOM'
description: 'Descubra o que é o Virtual DOM (VDOM), como ele funciona e por que é a chave para a alta performance do React.'
---

import { Aside, Card, CardGrid } from '@astrojs/starlight/components';

Uma das razões pelas quais o React é tão performático é o uso de um conceito chamado **Virtual DOM** (ou VDOM). Para entender sua importância, primeiro precisamos conhecer o problema que ele resolve.

### O Problema: O DOM Real é Lento

O **DOM** (Document Object Model) é a representação em árvore da estrutura de uma página HTML que o navegador usa. Manipular o DOM diretamente — por exemplo, criar, remover ou atualizar elementos — é uma das operações mais "caras" (lentas) que uma aplicação web pode fazer.

Cada vez que o DOM é alterado, o navegador precisa recalcular o layout, os estilos e redesenhar a página (processos conhecidos como "reflow" e "repaint"). Se uma aplicação faz muitas atualizações pequenas e frequentes diretamente no DOM, a performance pode ser severamente degradada, resultando em uma interface lenta e que "trava".

### A Solução: Uma Cópia Leve em Memória

O React adota uma abordagem mais inteligente. Em vez de interagir diretamente com o DOM a cada mudança, ele mantém uma cópia leve da árvore do DOM em memória: o **Virtual DOM**.

O Virtual DOM é apenas um objeto JavaScript que representa a estrutura do DOM real. Manipular esse objeto é extremamente rápido, pois não envolve nenhuma interação com o navegador.

## O Processo de Reconciliação

O verdadeiro poder do Virtual DOM aparece quando o estado de um componente muda. É aí que entra o processo de **Reconciliação**.

<CardGrid>
	<Card title="1. Mudança de Estado" icon="document">
		Tudo começa quando o estado de um componente é atualizado (por exemplo, via `setState`).
	</Card>
	<Card title="2. Nova Árvore Virtual" icon="seti:html">
		O React cria uma **nova** árvore do Virtual DOM que representa como a UI deve ficar *após* a mudança.
	</Card>
	<Card title="3. Diffing (Comparação)" icon="magnifier">
		O React então compara a nova árvore do VDOM com a versão anterior (a que está em memória). Esse processo de comparação é chamado de **"diffing"**.
	</Card>
	<Card title="4. Atualização Mínima" icon="seti:yml">
		Após a comparação, o React sabe exatamente quais partes da UI mudaram. Ele calcula o conjunto **mínimo** de operações necessárias para fazer o DOM real corresponder à nova árvore do VDOM.
	</Card>
    <Card title="5. Batching (Agrupamento)" icon="seti:default">
		Em vez de aplicar cada mudança uma por uma, o React agrupa (batches) todas as atualizações e as aplica no DOM real de uma só vez, em um único ciclo. Isso minimiza os custosos "reflows" e "repaints".
	</Card>
</CardGrid>

<Aside type="tip" title="Declarativo vs. Imperativo">
O Virtual DOM é o que permite que o React seja **declarativo**. Você simplesmente declara como a UI deve se parecer para um determinado estado, e o React, usando o VDOM, otimiza o "como fazer" para atualizar a tela de forma eficiente. Você não precisa se preocupar com a manipulação manual e performática do DOM.
</Aside>

## Vantagens do Virtual DOM

- **Performance:** Minimiza as interações diretas e lentas com o DOM, agrupando atualizações e aplicando apenas as mudanças necessárias.
- **Abstração:** Libera o desenvolvedor da complexidade da manipulação manual do DOM e de suas inconsistências entre diferentes navegadores.
- **Desenvolvimento Simplificado:** Permite escrever código de forma declarativa, tornando-o mais previsível e fácil de manter.

---

O algoritmo de reconciliação é incrivelmente eficiente, mas ele depende de uma ajuda do desenvolvedor para otimizar um cenário específico: a renderização de listas. Vamos ver como as **`keys`** desempenham um papel crucial nesse processo.
