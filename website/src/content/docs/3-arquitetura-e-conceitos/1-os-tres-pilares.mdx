---
title: "Os 3 Pilares do Nest.js: M√≥dulos, Controllers e Providers"
description: "Entenda a fun√ß√£o dos M√≥dulos, Controllers e Providers, os tr√™s blocos de constru√ß√£o fundamentais que formam a arquitetura de qualquer aplica√ß√£o Nest.js."
---

import { Card, CardGrid } from '@astrojs/starlight/components';

Toda aplica√ß√£o Nest.js √© constru√≠da sobre tr√™s pilares arquitet√¥nicos principais: **M√≥dulos**, **Controllers** e **Providers**. Compreender a responsabilidade de cada um √© o primeiro passo para dominar o framework e construir aplica√ß√µes robustas e organizadas.

Para facilitar o entendimento, vamos usar uma analogia com um restaurante.

<CardGrid>
    <Card title="ü§µ‚Äç‚ôÇÔ∏è Controller: O Gar√ßom">
        O Controller √© como o gar√ßom do seu restaurante. Sua principal fun√ß√£o √© receber os pedidos dos clientes (as requisi√ß√µes HTTP) e entregar a comida (as respostas). Ele n√£o cozinha, apenas faz a ponte entre o cliente e a cozinha.
    </Card>
    <Card title="üë®‚Äçüç≥ Provider: O Chef">
        O Provider, mais comumente um **Service**, √© o chef na cozinha. Ele recebe o pedido do gar√ßom e executa a l√≥gica complexa: prepara os ingredientes, cozinha o prato e o entrega pronto. Ele cont√©m a "l√≥gica de neg√≥cio" da aplica√ß√£o.
    </Card>
    <Card title="üçΩÔ∏è Module: A Cozinha">
        O Module √© a pr√≥pria cozinha (ou at√© mesmo o restaurante inteiro). Ele organiza o ambiente, garantindo que os gar√ßons (Controllers) e os chefs (Providers) estejam dispon√≠veis e saibam como trabalhar juntos. Cada cozinha pode ter sua especialidade (ex: `UsersModule`, `OrdersModule`).
    </Card>
</CardGrid>

Agora, vamos formalizar esses conceitos.

## Controllers: A Camada de Roteamento

A principal responsabilidade de um **Controller** √© receber as requisi√ß√µes que chegam √† sua aplica√ß√£o e retornar uma resposta ao cliente. Essencialmente, eles definem as rotas (endpoints) da sua API.

-   **Decorators:** S√£o marcados com o decorator `@Controller()`, que pode receber um prefixo de rota (ex: `@Controller('users')`).
-   **M√©todos:** Os m√©todos dentro de um Controller s√£o mapeados para verbos HTTP espec√≠ficos usando decorators como `@Get()`, `@Post()`, `@Delete()`, etc.
-   **Foco:** Devem ser "magros" (thin). Sua tarefa √© delegar a l√≥gica de neg√≥cio complexa para os Providers (Services), e n√£o execut√°-la diretamente.

```typescript
// Exemplo de um Controller
import { Controller, Get, Param } from '@nestjs/common';
import { UsersService } from './users.service';

@Controller('users')
export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  @Get(':id')
  findOne(@Param('id') id: string) {
    // Delega a busca para o service
    return this.usersService.findOne(id);
  }
}
```

## Providers: A Camada de L√≥gica de Neg√≥cio

Um **Provider** √© uma classe que pode ser gerenciada pelo sistema de Inje√ß√£o de Depend√™ncia do Nest.js. O tipo mais comum de Provider √© o **Service**.

-   **Decorators:** S√£o marcados com o decorator `@Injectable()`, que sinaliza ao Nest que esta classe pode ser injetada em outras.
-   **Responsabilidade:** Cont√™m a l√≥gica de neg√≥cio da sua aplica√ß√£o. Se voc√™ precisa se comunicar com um banco de dados, chamar outra API ou realizar um c√°lculo complexo, o lugar para isso √© em um Service.
-   **Outros Tipos:** Al√©m de Services, Providers podem ser Repositories (para acesso a dados), Factories (para criar objetos complexos), ou qualquer outra classe que encapsule uma l√≥gica reutiliz√°vel.

```typescript
// Exemplo de um Service
import { Injectable } from '@nestjs/common';

@Injectable()
export class UsersService {
  findOne(id: string) {
    // Aqui estaria a l√≥gica para buscar um usu√°rio no banco de dados
    return { id, name: 'John Doe', email: 'john.doe@example.com' };
  }
}
```

## M√≥dulos: A Camada de Organiza√ß√£o

Um **Module** √© uma classe com o decorator `@Module()` que organiza uma parte da sua aplica√ß√£o. Ele agrupa um conjunto de Controllers, Providers e at√© mesmo outros M√≥dulos relacionados a um dom√≠nio espec√≠fico.

-   **Encapsulamento:** M√≥dulos encapsulam a funcionalidade. Por padr√£o, os Providers de um m√≥dulo s√£o "privados" e s√≥ podem ser usados dentro daquele m√≥dulo.
-   **Compartilhamento:** Para que um Provider possa ser usado por outro m√≥dulo, ele precisa ser explicitamente adicionado ao array `exports` do seu m√≥dulo. O m√≥dulo consumidor, por sua vez, deve adicion√°-lo ao seu array `imports`.
-   **Aplica√ß√£o como um Grafo:** O Nest.js constr√≥i um grafo de depend√™ncias a partir dos m√≥dulos da sua aplica√ß√£o, come√ßando pelo `AppModule` (o m√≥dulo raiz).

```typescript
// Exemplo de um M√≥dulo
import { Module } from '@nestjs/common';
import { UsersController } from './users.controller';
import { UsersService } from './users.service';

@Module({
  controllers: [UsersController],
  providers: [UsersService],
  // exports: [UsersService] // Descomente para permitir que outros m√≥dulos usem UsersService
})
export class UsersModule {}
```

Nos pr√≥ximos cap√≠tulos, vamos mergulhar fundo em cada um desses pilares, explorando como criar e conectar cada pe√ßa para construir uma aplica√ß√£o Nest.js completa.
